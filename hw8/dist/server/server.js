(()=>{var e={319:e=>{e.exports={add:(e,t)=>(e.contents.push(t.body),JSON.stringify(e,null,4)),change:(e,t)=>(e.contents.find((e=>e.id_product===+t.params.id)).quantity+=t.body.quantity,JSON.stringify(e,null,4)),del:(e,t)=>{console.log("сейчас удалю");let s=e.contents.find((e=>e.id_product===+t.params.id));return console.log(s),e.contents.splice(e.contents.indexOf(s),1),JSON.stringify(e,null,4)}}},508:(e,t,s)=>{const r=s(127),n=s(747),i=r.Router(),o=s(303);i.get("/",((e,t)=>{n.readFile("dist/server/db/userCart.json","utf-8",((e,s)=>{e?t.sendStatus(404,JSON.stringify({result:0,text:e})):t.send(s)}))})),i.post("/",((e,t)=>{console.log(__dirname),o(e,t,"add","dist/server/db/userCart.json")})),i.put("/:id",((e,t)=>{o(e,t,"change","dist/server/db/userCart.json")})),i.delete("/:id",((e,t)=>{console.log("получена команда на удаление"),o(e,t,"del","dist/server/db/userCart.json")})),e.exports=i},303:(e,t,s)=>{const r=s(319),n=s(747),i={add:r.add,change:r.change,del:r.del};e.exports=(e,t,s,r)=>{n.readFile(r,"utf-8",((o,d)=>{if(o)t.sendStatus(404,JSON.stringify({result:0,text:o}));else{let o=i[s](JSON.parse(d),e);n.writeFile(r,o,(e=>{e?t.sendStatus(404,JSON.stringify({result:0,text:e})):t.send(JSON.stringify({result:1}))}))}}))}},127:e=>{"use strict";e.exports=require("express")},747:e=>{"use strict";e.exports=require("fs")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}(()=>{const e=s(127),t=s(747),r=e(),n=s(508);r.use(e.json()),r.use("/",e.static("dist/public")),r.use("/api/cart",n),r.get("/api/products",((e,s)=>{t.readFile("dist/server/db/products.json","utf-8",((e,t)=>{e?s.sendStatus(404,JSON.stringify({result:0,text:e})):s.send(t)}))}));const i=process.env.PORT||3e3;r.listen(i,(()=>console.log(`Listen on port ${i}...`)))})()})();